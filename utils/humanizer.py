"""AI ìƒì„± í…ìŠ¤íŠ¸ë¥¼ ì¸ê°„ì ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í›„ì²˜ë¦¬ ëª¨ë“ˆ"""
import re
import logging

logger = logging.getLogger(__name__)


# ë”±ë”±í•œ ì¡´ëŒ“ë§ â†’ ì¹œê·¼í•œ í•´ìš”ì²´ ë³€í™˜
FORMAL_TO_CASUAL = [
    # ìˆœì„œ ë‚˜ì—´ í‘œí˜„
    ("ì²«ì§¸,", "ì¼ë‹¨"),
    ("ë‘˜ì§¸,", "ê·¸ë¦¬ê³ "),
    ("ì…‹ì§¸,", "ë˜"),
    ("ë„·ì§¸,", "ê·¸ë¦¬ê³  ë˜"),
    ("ë‹¤ì„¯ì§¸,", "ë§ˆì§€ë§‰ìœ¼ë¡œ"),
    ("ë§ˆì§€ë§‰ìœ¼ë¡œ,", "ì•„ ê·¸ë¦¬ê³ "),
    ("ì²« ë²ˆì§¸ë¡œ,", "ì¼ë‹¨"),
    ("ë‘ ë²ˆì§¸ë¡œ,", "ê·¸ë‹¤ìŒì—"),
    ("ì„¸ ë²ˆì§¸ë¡œ,", "ë˜"),

    # ë”±ë”±í•œ ì¡´ëŒ“ë§ â†’ í•´ìš”ì²´
    ("í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤", "í•˜ëŠ” ê²Œ ì¤‘ìš”í•´ìš”"),
    ("ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤", "ì— ëŒ€í•´ ì•Œì•„ë³¼ê²Œìš”"),
    ("ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤", "ë¼ê³  ë³¼ ìˆ˜ ìˆì–´ìš”"),
    ("í•´ì•¼ í•©ë‹ˆë‹¤", "í•´ì•¼ í•´ìš”"),
    ("í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤", "í•˜ì„¸ìš”"),
    ("ë˜ì–´ ìˆìŠµë‹ˆë‹¤", "ë¼ ìˆì–´ìš”"),
    ("ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤", "ì¸ ê²ƒ ê°™ì•„ìš”"),
    ("í™•ì¸í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤", "í™•ì¸í•´ ë³´ì„¸ìš”"),
    ("ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤", "ì°¸ê³ í•˜ì„¸ìš”"),
    ("ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤", "ì‚´í´ë³¼ê²Œìš”"),
    ("ë§ì”€ë“œë¦¬ê² ìŠµë‹ˆë‹¤", "ë§ì”€ë“œë¦´ê²Œìš”"),
    ("ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤", "ë„ì›€ì´ ëìœ¼ë©´ ì¢‹ê² ì–´ìš”"),
    ("ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤", "ì•Œë ¤ë“œë¦´ê²Œìš”"),
    ("ì†Œê°œí•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤", "ì†Œê°œí•´ ë“œë¦´ê²Œìš”"),
    ("ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤", "ì„¤ëª…í•´ ë“œë¦´ê²Œìš”"),
    ("ì¶”ì²œë“œë¦½ë‹ˆë‹¤", "ì¶”ì²œí•´ìš”"),
    ("ê¶Œì¥í•©ë‹ˆë‹¤", "ê¶Œì¥í•´ìš”"),
    ("í•„ìš”í•©ë‹ˆë‹¤", "í•„ìš”í•´ìš”"),
    ("ìˆìŠµë‹ˆë‹¤", "ìˆì–´ìš”"),
    ("ë©ë‹ˆë‹¤", "ë¼ìš”"),
    ("ì…ë‹ˆë‹¤", "ì´ì—ìš”"),
    ("ìŠµë‹ˆë‹¤", "ì–´ìš”"),

    # ê²°ë¡ /ë§ˆë¬´ë¦¬ í‘œí˜„
    ("ê²°ë¡ ì ìœ¼ë¡œ ë§ì”€ë“œë¦¬ìë©´", "ì •ë¦¬í•˜ìë©´"),
    ("ê²°ë¡ ì ìœ¼ë¡œ", "ì •ë¦¬í•˜ìë©´"),
    ("ìš”ì•½í•˜ìë©´", "ì •ë¦¬í•´ë³´ë©´"),
    ("ë‹¤ì–‘í•œ ì¸¡ë©´ì—ì„œ ì‚´í´ë³´ë©´", "ì—¬ëŸ¬ ê°€ì§€ë¡œ ë³´ë©´"),
    ("ì¢…í•©ì ìœ¼ë¡œ íŒë‹¨í•˜ë©´", "ì „ì²´ì ìœ¼ë¡œ ë³´ë©´"),
]


def humanize_content(content: str) -> str:
    """
    AI ìƒì„± í…ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ¬ìš´ í•´ìš”ì²´ë¡œ ë³€í™˜

    Args:
        content: AIê°€ ìƒì„±í•œ HTML ì½˜í…ì¸ 

    Returns:
        í•´ìš”ì²´ë¡œ ë³€í™˜ëœ ì½˜í…ì¸ 
    """
    original_length = len(content)

    for old, new in FORMAL_TO_CASUAL:
        content = content.replace(old, new)

    logger.info(f"Humanized content: {original_length} -> {len(content)} chars")
    return content


def humanize_full(content: str, keyword: str) -> str:
    """
    ì „ì²´ ì¸ê°„í™” ì²˜ë¦¬

    Args:
        content: AIê°€ ìƒì„±í•œ HTML ì½˜í…ì¸ 
        keyword: ë¸”ë¡œê·¸ í‚¤ì›Œë“œ

    Returns:
        ì¸ê°„í™”ëœ ì½˜í…ì¸ 
    """
    print("  ğŸ§‘ ì¸ê°„í™” ì²˜ë¦¬ ì‹œì‘...")
    content = humanize_content(content)
    print("  âœ“ ì¸ê°„í™” ì²˜ë¦¬ ì™„ë£Œ")
    return content


if __name__ == "__main__":
    test_content = """
    <h2>í…ŒìŠ¤íŠ¸ ì œëª©</h2>
    <p>ì²«ì§¸, ì´ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‘˜ì§¸, ì €ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
    <p>ì´ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. í™•ì¸í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
    <p>ê²°ë¡ ì ìœ¼ë¡œ ë§ì”€ë“œë¦¬ìë©´ ì´ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.</p>
    """
    result = humanize_full(test_content, "í…ŒìŠ¤íŠ¸ í‚¤ì›Œë“œ")
    print(result)
